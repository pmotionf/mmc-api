syntax = "proto3";
package mmc.core;

// Core API: Request server configuration
message Request {
  Kind kind = 1;

  // List of server configuration to be retrieved
  enum Kind {
    CORE_REQUEST_KIND_UNSPECIFIED = 0;
    // Request server's API version.
    CORE_REQUEST_KIND_API_VERSION = 1;
    // Request server's version.
    CORE_REQUEST_KIND_SERVER_INFO = 2;
    // Request the track information of the server.
    CORE_REQUEST_KIND_TRACK_CONFIG = 3;
  }

  enum Error {
    CORE_REQUEST_ERROR_UNSPECIFIED = 0;
    // Unknown core API request.
    CORE_REQUEST_ERROR_REQUEST_UNKNOWN = 1;
  }
}

// Response description to the core API.
message Response {
  oneof body {
    // Server information.
    Server server = 1;
    // Server's API version.
    SemanticVersion api_version = 2;
    // Track configuration.
    TrackConfig track_config = 3;
    // Error response if the core API request is failed.
    Request.Error request_error = 4;
  }

  message TrackConfig {
    message Line {
      // Line ID.
      uint32 id = 1;
      // Line name.
      string name = 2;
      // Number of axes on the line.
      uint32 axes = 3;
      // Axis length of the line.
      float axis_length = 4;
      // Carrier length of the line.
      float carrier_length = 5;
    }
    // Array of the configured lines.
    repeated Line lines = 1;
  }

  message SemanticVersion {
    uint32 major = 1;
    uint32 minor = 2;
    uint32 patch = 3;
  }

  // Server version and name.
  message Server {
    // Server name.
    string name = 1;
    // Server implementation version.
    SemanticVersion version = 2;
  }
}
