var __index = {"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"index.html","title":"PMF MMC system","text":"<p>PMF provides the Motion Motor Control (MMC) system for controlling Linear Motor Systems (LMS) with ease and high precision.</p>"},{"location":"index.html#getting-started","title":"Getting started","text":""},{"location":"index.html#mmc-server","title":"MMC Server","text":"<p>The MMC Server acts as an endpoint for multiple clients to interface with the LMS. The server must run on a PC connected to the first driver of the LMS. Contact our engineers to obtain the MMC Server files and organize them as follows: <pre><code>mmc-server\n\u251c\u2500 config.json5\n\u251c\u2500 mmc.exe\n\u2514\u2500 mmc.pdb\n</code></pre> Navigate to the <code>mmc-server</code> folder and run the executable: <pre><code>mmc.exe --log_level=info\n</code></pre></p>"},{"location":"index.html#mmc-api","title":"MMC-API","text":"<p>Our API is built with Protobuf, offering  cross-language compatibility to support your programming language of choice. To  integrate our API into your program, ensure your working environment supports  Protobuf. For complete integration instructions, see the MMC-API Guidelines page.</p>"},{"location":"index.html#conventions","title":"Conventions","text":"<p>This section defines the terminology used throughout the PMF MMC documentation.</p>"},{"location":"index.html#system-hierarchy","title":"System Hierarchy","text":"<p>The following terms apply to the PMF MMC system:</p> <ul> <li><code>Sensor</code>: A hall sensor installed next to a motor to determine the accurate location of a carrier on a line.</li> <li><code>Axis</code>: A functional unit consisting of one motor and the two adjacent hall sensors.</li> <li><code>Driver</code>: A physical board responsible for controlling one or more axes. The number of axes per driver is defined in the <code>config.json5</code> file. A single driver can control up to 3 axes.</li> <li><code>Line</code>: A unit consisting of one or more drivers. Driver, axis, and carrier states are determined on a per-line basis.</li> <li><code>Track</code>: The highest-level unit in the PMF MMC system, consisting of one or more lines. One MMC Server operates exactly one track.</li> <li><code>Carrier</code>: Magnet to be moved by PMF's MMC system that is placed on top of LMS. Every carrier must have unique ID per line.</li> </ul>"},{"location":"index.html#id-constraints","title":"ID Constraints","text":"<p>Important: ID Indexing</p> <p>All system IDs (Lines, Drivers, Axes, and Carriers) use 1-based indexing. The first ID is always <code>1</code>.</p> Entity Max ID Calculation / Notes Line 256 Maximum lines supported per track. Driver 256 Maximum drivers per line. Axis 768 Based on 256 drivers \u00d7 3 axes per driver. Carrier 768 Maximum number of moveable magnet per line."},{"location":"mmc-api.html","title":"MMC-API Guidelines","text":"<p>This page covers how to use MMC-API to operate on LMS connected to PMF's MMC system.</p>"},{"location":"mmc-api.html#mmc-api-structure","title":"MMC-API Structure","text":"<p>The MMC API consists of three categories, where requests from each category receive responses from that same category. Please refer to the protocol documentation page for the expected response for each request.</p>"},{"location":"mmc-api.html#mmc-core","title":"MMC Core","text":"<p>Use MMC core messages to retrieve server information and track configuration. PMF recommend client to verify both client and server use the same minor SemVer version by requesting server's API version; mismatched versions may cause system errors. Clients must fetch the track configuration prior to operating the PMF MMC system to ensure all messages passed to the server contain valid parameters. Refer to the MMC core documentation for a comprehensive list of message types and expected responses.</p>"},{"location":"mmc-api.html#mmc-command","title":"MMC Command","text":"<p>Use MMC command messages to operate the PMF MMC system. Client must use the following rules when using sending MMC command message.</p> <ul> <li>Command ID: Each command will return a command ID as a response. Client must use the ID to monitor the command's state.</li> <li>Cleanup: Client must invoke <code>remove_command</code> once the command state becomes <code>COMPLETED</code>. Failure to do so will block the queue and prevent the server from accepting further commands.</li> <li>Queueing: Each driver executes only one command at a time. Commands sent to a busy driver will be queued in the order of arrival.</li> </ul> <p>Monitor command status via the command info request defined in the MMC Info section. List of commands are available on MMC command documentation.</p>"},{"location":"mmc-api.html#mmc-info","title":"MMC Info","text":"<p>Use MMC info messages to monitor the real-time state of the track and command status. The client can specify which track information to request by enabling the relevant flags within the track info message definition. The API also allows filtering track info based on driver range, axis range, or specific carrier IDs. Refer to the MMC info documentation for the complete message definitions for requesting track and command states.</p>"},{"location":"mmc-api.html#create-request","title":"Create Request","text":"<p>This section demonstrates how to construct and encode a request for transmission. The first example illustrates how to decode and validate a response before use. Subsequent examples will omit the response processing logic to focus on request creation and key considerations for specific commands.</p> <p>Info</p> <p>Client must exclusively use the mmc.Request message type to send requests to the server. Server always returns an mmc.Response message to be decoded on client side. Other message sent to server will return <code>mmc.Response.request_error</code>, showing the message is invalid.</p>"},{"location":"mmc-api.html#requesting-core-information","title":"Requesting Core Information","text":"<p>Info</p> <p>Core request message contains only one enum field. The following example demonstrates how to request API version used by server. Other core requests are implemented in the same manner.</p> <p>Warning</p> <p>Sending core request with kind <code>CORE_REQUEST_KIND_API_VERSION</code> will always return <code>mmc.Response.core.request_error</code>.</p> zigpython <p>Tip</p> <p>Zig users can directly use the pmotionf/mmc-api repository for ease of integration. If you are using a different Zig version, generate the Zig files from the source Protobuf files using zig-protobuf library.</p> <pre><code>const api = @import(\"mmc-api\");\n// Create a request and encode the message. Encode with passing the\n// transport writer interface pointer and allocator. Send the message by \n// flush the writer..\nconst request: api.protobuf.mmc.Request = .{\n    .body = .{\n        .core = .{ .kind = .CORE_REQUEST_KIND_API_VERSION },\n    },\n};\ntry request.encode(&amp;writer.interface, allocator);\ntry writer.interface.flush();\n// Receive and decode the message by passing the reader interface pointer \n// and allocator.\nconst decoded: api.protobuf.mmc.Response = try .decode(\n    &amp;client.reader.interface,\n    client.allocator,\n);\nswitch (decoded.body orelse std.log.err(\"Invalid Response\",.{})) {\n    .core =&gt; |core_resp| switch (core_resp.body orelse\n        std.log.err(\"Invalid Response\",.{})) {\n        .api_version =&gt; |api_version| std.log.info(\n            \"Server API version: {}.{}.{}\",\n            .{api_version.major, api_version.minor, api_version.patch,}\n        ),\n        .request_error =&gt; |req_err| std.log.err(\"{t}\",.{req_err}),\n        else =&gt; std.log.err(\"Invalid Response\",.{}),\n    },\n    .request_error =&gt; |req_err| std.log.err(\"{t}\",.{req_err}),\n    else =&gt; std.log.err(\"Invalid Response\",.{}),\n};\n</code></pre> <pre><code>import mmc_pb2 as mmc\n\n# Snipped: Create and connect socket to server\n\n# Create a request message\nrequest = mmc.Request()\nrequest.core.kind = mmc.mmc_dot_core__pb2.Request.CORE_REQUEST_KIND_API_VERSION\n\n# Snipped: Send and receive the message\n\n# Parse response\nmsg = mmc.Response()\nmsg.ParseFromString(response)\n\n# Validate and use the response accordingly\nif msg.WhichOneof(\"body\") == \"request_error\":\n    print(\"Error: \", mmc.Request.Error.Name(msg.request_error))\nelif msg.WhichOneof(\"body\") == \"core\":\n    # Validate if the core response that we receive is `api_version`\n    if msg.core.WhichOneof(\"body\") == \"request_error\":\n        print(\n            \"Error: \",\n            mmc.mmc_dot_core__pb2.Request.Error.Name(msg.core.request_error),\n        )\n    elif msg.core.WhichOneof(\"body\") == \"api_version\":\n      version = msg.core.api_version\n      print(\n          f\"Server API Version: {version.major}.{version.minor}.{version.patch}\"\n      )\n    else:\n        print(\"Invalid Response\")\nelse:\n    print(\"Invalid Response\")\n\ns.close()\n</code></pre>"},{"location":"mmc-api.html#command-request","title":"Command Request","text":"<p>Mandatory Command Cleanup</p> <p>Every command request returns a unique Command ID. The client is required to:</p> <ol> <li>Track the command status using this ID.</li> <li>Invoke <code>remove_command</code> once the state reaches <code>COMPLETED</code> or <code>FAILED</code>.</li> </ol> <p>Failure to remove finished commands will block the server queue and prevent further command execution.</p> <p>Check Error Reason</p> <p>If the command status is <code>FAILED</code>, users can find a descriptive reason by checking the command's <code>error</code> field.</p>"},{"location":"mmc-api.html#initialize-carrier","title":"Initialize Carrier","text":"<p>Info</p> <p>A carrier must be initialized before any actions can be performed. The <code>initialize</code> command is one of many available methods for initializing carriers. This command is sent to the axis specified in <code>axis</code> parameter.</p> <ul> <li>Single Axis Placement: If the uninitialized carrier is located on top of only one axis, the <code>link_axis</code> field must be ignored.</li> <li>Multi-Axis Placement: If a carrier is placed on top of two axes, the axis not specified in the <code>axis</code> parameter must be identified as a <code>link_axis</code>, specifying its direction relative to the specified axis.</li> </ul> <p>Unique Carrier ID Requirement</p> <p>The client must ensure the <code>carrier_id</code> is unique across the entire line. If the ID is already in use by another initialized carrier on the same line, the server will return <code>CONFLICTING_CARRIER_ID</code>.</p> <p>Example</p> <p>The following request initializes an uninitialized carrier with ID 1 on the first line in the forward direction. This carrier is placed on top of axis 1 and axis 2.</p> zigpython <pre><code>const api = @import(\"mmc-api\");\n\nconst request: api.protobuf.mmc.Request = .{\n    .body = .{\n        .command = .{\n            .body = .{\n                .initialize = .{\n                    .line = 1,\n                    .axis = 2,\n                    .carrier = 1,\n                    .direction = .DIRECTION_BACKWARD,\n                    .link_axis = .DIRECTION_FORWARD,\n                },\n            },\n        },\n    },\n};\n// Snipped content: \n// - Send `initialize` command\n// - Receive command ID as the response of command request\n// - Track command state until state `COMPLETED`\n// - Send `remove_command` command\n// - Receive `removed_id` response as the response of `remove_command` request\n</code></pre> <pre><code>import mmc_pb2 as mmc\n\n# Creating a request message\nCommand = mmc.mmc_dot_command__pb2.Request()\nrequest = mmc.Request()\nrequest.command.initialize.line = 1\nrequest.command.initialize.axis = 2\nrequest.command.initialize.carrier = 1\nrequest.command.initialize.direction = Command.Direction.DIRECTION_FORWARD\nrequest.command.initialize.link_axis = Command.Direction.DIRECTION_BACKWARD\n# Snipped content: \n# - Send `initialize` command\n# - Receive command ID as the response of command request\n# - Track command state until state `COMPLETED`\n# - Send `remove_command` command\n# - Receive `removed_id` response as the response of `remove_command` request\n</code></pre>"},{"location":"mmc-api.html#auto-initialize-carriers","title":"Auto Initialize Carriers","text":"<p>Info</p> <p>Auto initialize all carriers on the specified lines simultaneously. This process operates on carrier clusters, where a cluster is defined as a group of unitialized carriers located on adjacent axis.</p> <p>Warning</p> <p>Each cluster requires at least one free axis to successfully perform the auto-initialization. Any cluster lacking a free axis will be ignored, and all carriers within that cluster will remain uninitialized upon command completion.</p> <p>Tip</p> <p><code>velocity_mode</code> field define the representation of value provided by <code>velocity</code> field. Ignore <code>acceleration</code> and <code>velocity</code> field to use default value. Default value:</p> <ul> <li>Velocity: 0.6 m/s</li> <li>Acceleration: 6 m/s\u00b2</li> </ul> <p>Example</p> <p>Auto initialize all carriers on line 1 and line 2.</p> zigpython <pre><code>const api = @import(\"mmc-api\");\n\n// Allocate lines\nvar lines: std.ArrayList(\n    api.protobuf.mmc.command.Request.AutoInitialize.Line,\n) = .empty;\ndefer lines.deinit(allocator);\n\n// Define first line\ntry lines.append(allocator, .{\n    .line = 1,\n    .acceleration = 60,\n    .velocity = 6,\n    .velocity_mode = .VELOCITY_MODE_NORMAL,\n});\n\n// Define second line\ntry lines.append(allocator, .{\n    .line = 2,\n    .acceleration = 60,\n    .velocity = 6,\n    .velocity_mode = .VELOCITY_MODE_NORMAL,\n});\n\n// Create a request\nconst request: api.protobuf.mmc.Request = .{\n    .body = .{\n        .command = .{\n            .body = .{\n                .auto_initialize = .{\n                    .lines = lines,\n                },\n            },\n        },\n    },\n};\n</code></pre> <pre><code>import mmc_pb2 as mmc\n\nCommand = mmc.mmc_dot_command__pb2.Request()\n\n# Define first line\nline1 = Command.AutoInitialize.Line()\nline1.line = 1\nline1.velocity = 6\nline1.acceleration = 60\nline1.velocity_mode = Command.VelocityMode.VELOCITY_MODE_NORMAL\n\n# Define second line\nline2 = Command.AutoInitialize.Line()\nline2.line = 2\nline2.velocity = 6\nline2.acceleration = 60\nline2.velocity_mode = Command.VelocityMode.VELOCITY_MODE_NORMAL\n\n# Create a request\nrequest = mmc.Request()\nrequest.command.auto_initialize.lines.append(line1)\nrequest.command.auto_initialize.lines.append(line2)\n</code></pre>"},{"location":"mmc-api.html#deinitialize-carriers","title":"Deinitialize Carriers","text":"<p>Info</p> <p>Deinitialize will release the motor control on the specified carriers and remove carrier states from MMC system. Deinitialize all carriers on a line without specifying any target. If target is specified, deinitialize carriers based on the provided target. </p> <ul> <li>Carrier target deinitializes carrier with the specified ID.</li> <li>Driver target deinitializes carriers on the specified driver range.</li> <li>Axis target deinitializes carriers on the specified axis range.</li> </ul> <p>Example</p> <p>Deinitialize carrier 1 on the first line.</p> zigpython <pre><code>const api = @import(\"mmc-api\");\n\n// Create a request\nconst request: api.protobuf.mmc.Request = .{\n    .body = .{\n        .command = .{\n            .body = .{\n                .deinitialize = .{\n                    .line = line.id,\n                    .target = .{ .carrier = 1 }\n                },\n            },\n        },\n    },\n};\n</code></pre> <pre><code>import mmc_pb2 as mmc\n\n# Create a request\nrequest = mmc.Request()\nrequest.command.deinitialize.line = 1\nrequest.command.deinitialize.carrier = 1\n</code></pre>"},{"location":"mmc-api.html#move-carrier","title":"Move Carrier","text":"<p>Tip</p> <p>Track the carrier state until it reaches <code>MOVE_COMPLETED</code> before sending further commands to the specified carrier to avoid unwanted behavior. The command state <code>COMPLETED</code> only indicates that the command was successfully received and is being processed by the MMC system.</p> <p>Warning</p> <p>The <code>target</code> field must be specified by user, and only the last <code>target</code> value will be serialized to server. See Oneof for complete description on <code>Oneof</code> protobuf type.</p> <p>Example</p> <p>Move initialized carrier 1 to axis 3 on the second line.</p> zigpython <pre><code>const api = @import(\"mmc-api\");\n\n// Create a request\nconst request: api.protobuf.mmc.Request = .{\n    .body = .{\n        .command = .{\n            .body = .{\n                .move = .{\n                    .line = 2,\n                    .carrier = 1,\n                    .velocity = 10,\n                    .acceleration = 60,\n                    .target = .{.axis = 3},\n                    .control = .CONTROL_POSITION,\n                    .disable_cas = false,\n                    .velocity_mode = .VELOCITY_MODE_NORMAL,\n                },\n            },\n        },\n    },\n};\n</code></pre> <pre><code>import mmc_pb2 as mmc\n\n# Create a request\nrequest = mmc.Request()\nrequest.command.move.line = 2\nrequest.command.move.carrier = 1\nrequest.command.move.velocity = 10\nrequest.command.move.acceleration = 60\nrequest.command.move.axis = 3\n# mmc.Control() message is not generated by protoc compiler because Python does\n# not allow to use definition based on namespace.\n# 1 for CONTROL_POSITION\n# 2 for CONTROL_VELOCITY.\nrequest.command.move.control = 1\nrequest.command.move.disable_cas = False\nrequest.command.move.velocity_mode = Command.VelocityMode.VELOCITY_MODE_NORMAL\n</code></pre>"},{"location":"mmc-api.html#push","title":"Push","text":"<p>Info</p> <p>Forcefully moves an initialized carrier on the specified axis by one carrier length. Use this movement to cross a line boundary, which deinitializes the carrier from the current line upon completion. </p> <p>If <code>carrier</code> field is provided in the push command, the axis enters a pushing state. In this state, the axis remains busy and waits for the specified carrier to arrive; once it arrives, the axis automatically pushes the carrier.</p> <p>Warning</p> <p>When pushing the carrier to a different line, the receiving axis on the destination line must be in a pulling state.</p> <p>Tip</p> <p>To disable the pushing state on an axis, utilize the stop push command.</p> <p>Example</p> <p>Push carrier on axis 1 of line 2 backward to line 1. </p> <p>Warning</p> <p>Destination axis on line 1 must be in pulling state.</p> zigpython <pre><code>const api = @import(\"mmc-api\");\n\n// Create a request\nconst request: api.protobuf.mmc.Request = .{\n    .body = .{\n        .command = .{\n            .body = .{\n                .push = .{\n                    .line = 2,\n                    .axis = 1,\n                    .direction = .DIRECTION_BACKWARD,\n                    .velocity = 10,\n                    .acceleration = line.acceleration,\n                    .velocity_mode = .VELOCITY_MODE_NORMAL,\n                },\n            },\n        },\n    },\n};\n</code></pre> <pre><code>import mmc_pb2 as mmc\n\nCommand = mmc.mmc_dot_command__pb2.Request()\n# Create a request\nrequest = mmc.Request()\nrequest.command.push.line = 2\nrequest.command.push.axis = 1\nrequest.command.push.direction = Command.Direction.DIRECTION_BACKWARD\nrequest.command.push.velocity = 10\nrequest.command.push.acceleration = 60\nrequest.command.push.velocity_mode = Command.VelocityMode.VELOCITY_MODE_NORMAL\n</code></pre>"},{"location":"mmc-api.html#pull","title":"Pull","text":"<p>Info</p> <p>Initialize an incoming carrier outside the line. This command makes the specified axis into pulling state. This initialization procedure has the following behavior:</p> <ul> <li>Center Alignment: Omit the <code>transition</code> field to initialize the carrier to the center axis</li> <li>Smooth Transition: Provide a <code>transition</code> field to automatically move to the specified destination as soon as the carrier is recognized.</li> <li>Manual Mode (External Force): Omit the <code>transition</code>, <code>velocity</code>, and <code>acceleration</code> fields to initializes the carrier in the NONE state (no controlled by motor), allowing it to be moved manually or by external systems.</li> </ul> <p>Example</p> <p>Set axis 6 of line 1 to pulling state, in which the pulled carrier will move to axis 3.</p> zigpython <pre><code>const api = @import(\"mmc-api\");\n\n// Create a request\nconst request: api.protobuf.mmc.Request = .{\n    .body = .{\n        .command = .{\n            .body = .{\n                .pull = .{\n                    .line = 1,\n                    .axis = 6,\n                    .carrier = 1,\n                    .velocity = 10,\n                    .acceleration = 10,\n                    .direction = .DIRECTION_BACKWARD,\n                    .transition = .{\n                        .control = .CONTROL_POSITION,\n                        .disable_cas = false,\n                        .target = .{.axis = 3},\n                    },\n                    .velocity_mode = .VELOCITY_MODE_NORMAL,\n                },\n            },\n        },\n    },\n};\n</code></pre> <pre><code>import mmc_pb2 as mmc\n\nCommand = mmc.mmc_dot_command__pb2.Request()\n# Create a request\nrequest = mmc.Request()\nrequest.command.pull.line = 1\nrequest.command.pull.axis = 6\nrequest.command.pull.carrier = 1\nrequest.command.pull.direction = Command.Direction.DIRECTION_BACKWARD\nrequest.command.pull.velocity = 10\nrequest.command.pull.acceleration = 60\nrequest.command.pull.transition.control = 1\nrequest.command.pull.transition.disable_cas = False\nrequest.command.pull.transition.axis = 3\nrequest.command.pull.velocity_mode = Command.VelocityMode.VELOCITY_MODE_NORMAL\n</code></pre>"},{"location":"mmc-api.html#release-carrier","title":"Release Carrier","text":"<p>Info</p> <p>Put the initialized carrier into <code>NONE</code> state, allowing it to be moved manually or by external systems.</p> <p>Example</p> <p>Release control on carrier 1 in line 1.</p> zigpython <pre><code>const api = @import(\"mmc-api\");\n\n// Create a request\nconst request: api.protobuf.mmc.Request = .{\n    .body = .{\n        .command = .{\n            .body = .{\n                .release = .{\n                    .line = 1,\n                    .target = .{.carrier = 1},\n                },\n            },\n        },\n    },\n};\n</code></pre> <pre><code>import mmc_pb2 as mmc\n\n# Create a request\nrequest = mmc.Request()\nrequest.command.release.line = 1\nrequest.command.release.carrier = 1\n</code></pre>"},{"location":"mmc-api.html#calibrate-line","title":"Calibrate Line","text":"<p>Info</p> <p>Calibrate drivers' configuration on a line. A unitialized must be located on the center of first axis on the specified line.</p> <p>Example</p> <p>Calibrate drivers' configuration on the first line.</p> zigpython <pre><code>const api = @import(\"mmc-api\");\n\n// Create a request\nconst request: api.protobuf.mmc.Request = .{\n    .body = .{\n        .command = .{\n            .body = .{\n                .calibrate = .{.line = 1},\n            },\n        },\n    },\n};\n</code></pre> <pre><code>import mmc_pb2 as mmc\n\n# Create a request\nrequest = mmc.Request()\nrequest.command.calibrate.line = 1\n</code></pre>"},{"location":"mmc-api.html#stop-push","title":"Stop Push","text":"<p>Tip</p> <p>To reset all pushing state on every axis, ignore <code>axes</code> field.</p> <p>Example</p> <p>Reset pushing state on axis 1 to 4 of the first line. </p> zigpython <pre><code>const api = @import(\"mmc-api\");\n\n// Create a request\nconst request: api.protobuf.mmc.Request = .{\n    .body = .{\n        .command = .{\n            .body = .{\n                .stop_push = .{\n                    .line = 1,\n                    .axes = .{\n                        .start = 1,\n                        .end = 4,\n                    },\n                },\n            },\n        },\n    },\n};\n</code></pre> <pre><code>import mmc_pb2 as mmc\n\n# Create a request\nrequest = mmc.Request()\nrequest.command.stop_push.line = 1\nrequest.command.stop_push.axes.start = 1\nrequest.command.stop_push.axes.end = 4\n</code></pre>"},{"location":"mmc-api.html#stop-pull","title":"Stop Pull","text":"<p>Tip</p> <p>To reset all pulling state on every axis, ignore <code>axes</code> field.</p> <p>Example</p> <p>Reset pulling state on axis 1 to 4 of the first line. </p> zigpython <pre><code>const api = @import(\"mmc-api\");\n\n// Create a request\nconst request: api.protobuf.mmc.Request = .{\n    .body = .{\n        .command = .{\n            .body = .{\n                .stop_pull = .{\n                    .line = 1,\n                    .axes = .{\n                        .start = 1,\n                        .end = 4,\n                    },\n                },\n            },\n        },\n    },\n};\n</code></pre> <pre><code>import mmc_pb2 as mmc\n\n# Create a request\nrequest = mmc.Request()\nrequest.command.stop_pull.line = 1\nrequest.command.stop_pull.axes.start = 1\nrequest.command.stop_pull.axes.end = 4\n</code></pre>"},{"location":"mmc-api.html#set-carrier-id","title":"Set Carrier ID","text":"<p>Warning</p> <p>Carrier ID on each carrier must be unique across a line.</p> <p>Example</p> <p>Change carrier ID of carrier 1 to 4 on the first line.</p> zigpython <pre><code>const api = @import(\"mmc-api\");\n\n// Create a request\nconst request: api.protobuf.mmc.Request = .{\n    .body = .{\n        .command = .{\n            .body = .{\n                .set_carrier_id = .{\n                    .line = 1,\n                    .carrier = 1,\n                    .new_carrier = 4,\n                },\n            },\n        },\n    },\n};\n</code></pre> <pre><code>import mmc_pb2 as mmc\n\n# Create a request\nrequest = mmc.Request()\nrequest.command.set_carrier_id.line = 1\nrequest.command.set_carrier_id.carrier = 1\nrequest.command.set_carrier_id.new_carrier = 4\n</code></pre>"},{"location":"mmc-api.html#set-zero","title":"Set Zero","text":"<p>Example</p> <p>Set zero point of the first line.</p> <p>Warning</p> <p>Initialized carrier must be located on the first axis of the first line.</p> zigpython <pre><code>const api = @import(\"mmc-api\");\n\n// Create a request\nconst request: api.protobuf.mmc.Request = .{\n    .body = .{\n        .command = .{\n            .body = .{\n                .set_zero = .{.line = 1},\n            },\n        },\n    },\n};\n</code></pre> <pre><code>import mmc_pb2 as mmc\n\n# Create a request\nrequest = mmc.Request()\nrequest.command.set_zero.line = 1\n</code></pre>"},{"location":"mmc-api.html#clear-errors","title":"Clear Errors","text":"<p>Warning</p> <p>Always clear errors whenever an error is detected on axis or driver. Failing to clear error result to unwanted behavior.</p> <p>Tip</p> <p>Ignore <code>axes</code> field to clear errors on all drivers and axes on the line.</p> <p>Example</p> <p>Clear all errors on the first line.</p> zigpython <pre><code>const api = @import(\"mmc-api\");\n\n// Create a request\nconst request: api.protobuf.mmc.Request = .{\n    .body = .{\n        .command = .{\n            .body = .{\n                .clear_errors = .{.line = 1},\n            },\n        },\n    },\n};\n</code></pre> <pre><code>import mmc_pb2 as mmc\n\n# Create a request\nrequest = mmc.Request()\nrequest.command.clear_errors.line = 1\n</code></pre>"},{"location":"mmc-api.html#emergency-stop","title":"Emergency Stop","text":"<p>Tip</p> <p>Pass empty list to stop operation on all lines.</p> <p>Example</p> <p>Stop operation on all lines.</p> zigpython <pre><code>const api = @import(\"mmc-api\");\n\n// Create a request\nconst request: api.protobuf.mmc.Request = .{\n    .body = .{\n        .command = .{\n            .body = .{\n                .stop = .{.lines = &amp;.{}},\n            },\n        },\n    },\n};\n</code></pre> <pre><code>import mmc_pb2 as mmc\n\n# Create a request\nrequest = mmc.Request()\nrequest.command.stop.lines.extend([])\n</code></pre>"},{"location":"mmc-api.html#pause-execution","title":"Pause Execution","text":"<p>Tip</p> <p>Pass empty list to pause operation on all lines.</p> <p>Example</p> <p>Pause operation on all lines.</p> zigpython <pre><code>const api = @import(\"mmc-api\");\n\n// Create a request\nconst request: api.protobuf.mmc.Request = .{\n    .body = .{\n        .command = .{\n            .body = .{\n                .pause = .{.lines = &amp;.{}},\n            },\n        },\n    },\n};\n</code></pre> <pre><code>import mmc_pb2 as mmc\n\n# Create a request\nrequest = mmc.Request()\nrequest.command.pause.lines.extend([])\n</code></pre>"},{"location":"mmc-api.html#resume-execution","title":"Resume Execution","text":"<p>Tip</p> <p>Pass empty list to resume operation on all lines.</p> <p>Example</p> <p>Resume operation on all lines.</p> zigpython <pre><code>const api = @import(\"mmc-api\");\n\n// Create a request\nconst request: api.protobuf.mmc.Request = .{\n    .body = .{\n        .command = .{\n            .body = .{\n                .@\"resume\" = .{.lines = &amp;.{}},\n            },\n        },\n    },\n};\n</code></pre> <pre><code>import mmc_pb2 as mmc\n\n# Create a request\nrequest = mmc.Request()\nrequest.command.resume.lines.extend([])\n</code></pre>"},{"location":"mmc-api.html#remove-command","title":"Remove Command","text":"<p>Warning</p> <p>Failure to remove command will block the queue and prevent the server from accepting further commands.</p> <p>Tip</p> <p>Always check command status after sending any command message. (Request Command State)</p> <p>Example</p> <p>Remove command with ID 1 from server.</p> zigpython <pre><code>const api = @import(\"mmc-api\");\n\n// Create a request\nconst request: api.protobuf.mmc.Request = .{\n    .body = .{\n        .command = .{\n            .body = .{\n                .remove_command = .{.command = 1},\n            },\n        },\n    },\n};\n</code></pre> <pre><code>import mmc_pb2 as mmc\n\n# Creating a request message\nrequest = mmc.Request()\nrequest.command.remove_command.command = id\n</code></pre>"},{"location":"mmc-api.html#info-request","title":"Info Request","text":""},{"location":"mmc-api.html#request-command-state","title":"Request Command State","text":"<p>Example</p> <p>Wait command state until <code>COMPLETED</code> or <code>FAILED</code> and remove the command.</p> zigpython <pre><code>const api = @import(\"mmc-api\");\n\nfn waitCommand(id: u32) !void {\n    defer removeCommand(id);\n    const request: api.protobuf.mmc.Request = .{\n        .body = .{\n            .info = .{\n                .body = .{\n                    .command = .{ .id = id },\n                },\n            },\n        },\n    };\n    while (true) {\n        try request.encode(&amp;writer.interface, allocator);\n        try writer.interface.flush();\n        var decoded: api.protobuf.mmc.Response = try .decode(\n            &amp;reader.interface,\n            allocator,\n        );\n        defer decoded.deinit(allocator);\n        const command_response = switch (decoded.body orelse\n            return error.InvalidResponse) {\n            .request_error =&gt; |req_err| {\n                std.log.err(\"{t}\", .{req_err});\n                return;\n            },\n            .info =&gt; |info_resp| switch (info_resp.body orelse\n                return error.InvalidResponse) {\n                .command =&gt; |commands_resp| commands_resp.items.items[0],\n                .request_error =&gt; |req_err| {\n                    std.log.err(\"{t}\", .{req_err});\n                    return;\n                },\n                else =&gt; return error.InvalidResponse,\n            },\n            else =&gt; return error.InvalidResponse,\n        };\n        switch (command_response.status) {\n            .COMMAND_STATUS_PROGRESSING =&gt; {}, // continue the loop\n            .COMMAND_STATUS_COMPLETED =&gt; return,\n            .COMMAND_STATUS_FAILED =&gt; {\n                std.log.err(\"{t}\", .{command_response.@\"error\".?});\n                return;\n            },\n            .COMMAND_STATUS_UNSPECIFIED =&gt; return error.InvalidResponse,\n        }\n    }\n}\n</code></pre> <pre><code>import mmc_pb2 as mmc\n\ndef waitCommand(id):\n    # Creating a request message\n    request = mmc.Request()\n    request.info.command.id = id\n    while True:\n        # Send and receive response\n        s.sendall(request.SerializeToString())\n        response = s.recv(4096)\n\n        # Parsing the response\n        msg = mmc.Response()\n        msg.ParseFromString(response)\n        Command = mmc.mmc_dot_info__pb2.Response.Command()\n\n        # Validate and use the response accordingly\n        if msg.WhichOneof(\"body\") == \"request_error\":\n            print(\"Request Error\", mmc.Request.Error.Name(msg.request_error))\n            return\n        elif msg.WhichOneof(\"body\") == \"info\":\n            # Validate if the core response that we receive is `api_version`\n            if msg.info.WhichOneof(\"body\") == \"request_error\":\n                print(\n                    \"Request Error\",\n                    mmc.mmc_dot_info__pb2.Request.Error.Name(msg.info.request_error),\n                )\n                return\n            elif msg.info.WhichOneof(\"body\") == \"command\":\n                command = msg.info.command.items[0]\n                if command.status == Command.Status.COMMAND_STATUS_COMPLETED:\n                    removeCommand(id)\n                    return\n                elif command.status == Command.Status.COMMAND_STATUS_FAILED:\n                    removeCommand(id)\n                    raise Exception(Command.Error.Name(command.error))\n                else:\n                    print(\"Invalid Response\")\n                    return\n            else:\n                print(\"Invalid Response\")\n                return\n        else:\n            print(\"Invalid Response\")\n            return\n</code></pre>"},{"location":"mmc-api.html#request-track-state","title":"Request Track State","text":"<p>Tip</p> <p>Certain commands require the client to monitor carrier status to ensure movements is completed.</p> <ul> <li>Move: Wait until the carrier state is <code>MOVE_COMPLETED</code> before sending a new command to that carrier.</li> <li>Calibrate: Wait until the carrier state is <code>CALIBRATE_COMPLETED</code> to ensure the driver configuration is valid.</li> <li>Initialize: Wait until the carrier state is <code>INITIALIZE_COMPLETED</code> before performing further operations on the carrier.</li> <li>Pull: If the <code>transition</code> field is omitted, wait for <code>PULL_COMPLETED</code>; otherwise, wait for <code>MOVE_COMPLETED</code>.</li> </ul> <p>Warning</p> <p>Monitor driver, axis, and carrier <code>error</code> flags to prevent damage to the motor or driver board. Pay close attention to <code>inverter_overheat</code> on the driver and <code>overcurrent</code> flags on the axis; immediately deinitialize any carrier on the affected axis and drivers if these are detected. The <code>overvoltage</code> and <code>undervoltage</code> flags indicate that the system voltage supply may have a problem; please consult with our engineers to resolve the issue.</p> <p>Request carrier state</p> <p>Tip</p> <ul> <li>Omit <code>filter</code> field when sending track info message to retrieve all toggled flags information.</li> <li>Set all flags on track info message to retrieve every message in one request.</li> </ul> zigpython <pre><code>const api = @import(\"mmc-api\");\nfn carrierState(line: u32, carrier: u32) !void {\n    var carrier_id = [1]u32{carrier};\n    const request: api.protobuf.mmc.Request = .{\n        .body = .{\n            .info = .{\n                .body = .{\n                    .track = .{\n                        .line = line,\n                        .info_carrier_state = true,\n                        .filter = .{\n                            .carriers = .{\n                                .ids = .fromOwnedSlice(&amp;carrier_id),\n                            },\n                        },\n                    },\n                },\n            },\n        },\n    };\n    try request.encode(&amp;writer.interface, allocator);\n    try writer.interface.flush();\n    var decoded: api.protobuf.mmc.Response = try .decode(\n        &amp;reader.interface,\n        allocator,\n    );\n    defer decoded.deinit(allocator);\n    switch (decoded.body orelse return error.InvalidResponse) {\n        .info =&gt; |info_resp| switch (info_resp.body orelse\n            return error.InvalidResponse) {\n            .track =&gt; |track_resp| {\n                std.log.info(\"{}\", .{track_resp.carrier_state.items[0]});\n            },\n            .request_error =&gt; |req_err| {\n                std.log.err(\"{t}\", .{req_err});\n            },\n            else =&gt; return error.InvalidResponse,\n        },\n        .request_error =&gt; |req_err| {\n            std.log.err(\"{t}\", .{req_err});\n            return;\n        },\n        else =&gt; return error.InvalidResponse,\n    }\n}\n</code></pre> <pre><code>import mmc_pb2 as mmc\ndef carrierState(line, carrier):\n    # Creating a request message\n    request = mmc.Request()\n    request.info.track.line = line\n    request.info.track.info_carrier_state = True\n    request.info.track.carriers.ids.append(carrier)\n\n    # Parsing the response\n    msg = mmc.Response()\n    msg.ParseFromString(response)\n    # Validate and use the response accordingly\n    if msg.WhichOneof(\"body\") == \"request_error\":\n        print(\"Request Error\", mmc.Request.Error.Name(msg.request_error))\n    elif msg.WhichOneof(\"body\") == \"info\":\n        # Validate if the core response that we receive is `api_version`\n        if msg.info.WhichOneof(\"body\") == \"request_error\":\n            print(\n                \"Request Error\",\n                mmc.mmc_dot_info__pb2.Request.Error.Name(msg.info.request_error),\n            )\n        elif msg.info.WhichOneof(\"body\") == \"track\":\n            assert len(msg.info.track.carrier_state) != 0\n            carrier = msg.info.track.carrier_state[0]\n            print(carrier)\n        else:\n            print(\"Invalid Response\")\n    else:\n        print(\"Invalid Response\")\n</code></pre>"},{"location":"protocol-documentation.html","title":"Protocol Documentation","text":""},{"location":"protocol-documentation.html#mmcproto","title":"mmc.proto","text":""},{"location":"protocol-documentation.html#request","title":"Request","text":"<p>Request message. All client-to-server messages should be of this message type.</p> Field Type Label Description core core.Request Core request. Used to retrieve information about the server or the configured track. command command.Request Command request. Used to send and manage commands to the server, which will execute commands on the connected track. info info.Request Info request. Used to retrieve information about track state or commands processed by the server. <p></p>"},{"location":"protocol-documentation.html#response","title":"Response","text":"<p>Response message. All server-to-client messages will be of this message type.</p> Field Type Label Description core core.Response Core response. command command.Response Command response. info info.Response Info Response. request_error Request.Error Top-level request error. This error field will be returned only if the top-level request could not be handled properly. Otherwise, response kinds may contain more specific error codes. <p></p>"},{"location":"protocol-documentation.html#requesterror","title":"Request.Error","text":"Name Number Description MMC_REQUEST_ERROR_UNSPECIFIED 0 This error code is unused, and will never be returned. It is reserved as the default error code according to protobuf specification. MMC_REQUEST_ERROR_INVALID_MESSAGE 1 The request could not be decoded as a valid protobuf message."},{"location":"protocol-documentation.html#rangeproto","title":"range.proto","text":""},{"location":"protocol-documentation.html#range","title":"Range","text":"Field Type Label Description start uint32 Start of range, inclusive. end uint32 End of range, inclusive."},{"location":"protocol-documentation.html#mmccommandproto","title":"mmc/command.proto","text":""},{"location":"protocol-documentation.html#request_1","title":"Request","text":"<p>Command API: List of commands to operate the PMF's motion system.</p> <p>When a command is sent to the server, it will be queued for execution. Command execution status can be polled through the Info API. The status remains stored in a limited history buffer, and should be cleared with <code>remove_command</code> after completion.</p> Field Type Label Description calibrate Request.Calibrate Calibrate a line. This command only needs to be run once after hardware setup; calibrated values will remain stored in drivers even after a power cycle. set_zero Request.SetZero Set the zero position of the specified line. This command can be run optionally after calibration, upon which all drivers will store the set zero position of the line. The set zero position will remain unchanged even after a power cycle. initialize Request.Initialize Initialize a carrier. Carriers must be initialized before they can be moved. Initialization is required after every power cycle. auto_initialize Request.AutoInitialize Initialize all carriers of the specified line(s). If no lines are specified, initialize all carriers across all lines in the track. deinitialize Request.Deinitialize Deinitialize a carrier. This removes all carrier information, such as recognized position and carrier ID. move Request.Move Move an initialized carrier to the desired position. pull Request.Pull Pull and initialize a new carrier into a line. push Request.Push Push an initialized carrier to the specified direction. stop_pull Request.StopPull Stop waiting to pull a new carrier at an axis. stop_push Request.StopPush Stop waiting to push an initialized carrier at an axis. release Request.Release Release the motor control of a carrier. clear_errors Request.ClearErrors Clear all errors within the specified driver range. remove_command Request.RemoveCommand Cancel a running command or remove its status history. stop Request.Stop Activate emergency stop for all drivers in line(s). Emergency stop will cause all carriers to deccelerate to rest, then reset all carriers' movement commands. pause Request.Pause Activate pause for all drivers in line(s). Pause will cause all carriers to deccelerate to rest. On resume, the carriers will continue their previously assigned movement commands. resume Request.Resume Deactivate emergency stop and pause for all drivers in line(s). set_carrier_id Request.SetCarrierId Change an existing carrier ID to a new unique carrier ID. <p></p>"},{"location":"protocol-documentation.html#requestautoinitialize","title":"Request.AutoInitialize","text":"<p>Automatically initialize carriers on every specified lines.</p> <p>Expected response: <code>mmc.Response.body.command.body.id</code> (uint32).</p> Field Type Label Description lines Request.AutoInitialize.Line repeated <p></p>"},{"location":"protocol-documentation.html#requestautoinitializeline","title":"Request.AutoInitialize.Line","text":"Field Type Label Description line uint32 Line ID. velocity uint32 optional If <code>velocity_mode</code> field is set to <code>normal</code>, the integer range is 1-100 representing 0.1-10 m/s. If <code>velocity_mode</code> field is set to <code>low</code>, the integer range is 1-1000 representing 0.1-100 mm/s. acceleration uint32 optional Fixed point integer from 1-245, representing 0.1-24.5 m/s^2. (default 6 m/s^2) velocity_mode Request.VelocityMode Specify the unit of the <code>velocity</code> value."},{"location":"protocol-documentation.html#requestcalibrate","title":"Request.Calibrate","text":"<p>Calibrate a line by positioning an unitiliazed carrier on the first axis of the line.</p> <p>Expected response: <code>mmc.Response.body.command.body.id</code> (uint32).</p> Field Type Label Description line uint32 Line ID. <p></p>"},{"location":"protocol-documentation.html#requestclearerrors","title":"Request.ClearErrors","text":"<p>Clear all error information on the driver. If a target is specified, clear error information of drivers which is located on the target. If not, clear error information on every driver of the specified line ID.</p> <p>Expected response: <code>mmc.Response.body.command.body.id</code> (uint32).</p> Field Type Label Description line uint32 Line ID. drivers Range Driver ID range. axes Range Axis ID range. carrier uint32 Carrier ID. <p></p>"},{"location":"protocol-documentation.html#requestdeinitialize","title":"Request.Deinitialize","text":"<p>Clear carrier information located on the axis. If a target is specified, clear information of carriers which is located on the target. If not, clear all carrier information of the specified line ID</p> <p>Expected response: <code>mmc.Response.body.command.body.id</code> (uint32).</p> Field Type Label Description line uint32 Line ID. axes Range Axis ID range. drivers Range Driver ID range. carrier uint32 Carrier ID. <p></p>"},{"location":"protocol-documentation.html#requestinitialize","title":"Request.Initialize","text":"<p>Initialize a carrier.</p> <p>Expected response: <code>mmc.Response.body.command.body.id</code> (uint32).</p> Field Type Label Description line uint32 Line ID. axis uint32 Axis ID. carrier uint32 ID for the new carrier. direction Request.Direction Initialization direction for the new carrier. link_axis Request.Direction optional Linked axis direction from the specified axis. <p></p>"},{"location":"protocol-documentation.html#requestmove","title":"Request.Move","text":"<p>Move a carrier to the desired position.</p> <p>Expected response: <code>mmc.Response.body.command.body.id</code> (uint32).</p> Field Type Label Description line uint32 Line ID. carrier uint32 Carrier ID. velocity uint32 If <code>velocity_mode</code> field is set to <code>normal</code>, the integer range is 1-100 representing 0.1-10 m/s. If <code>velocity_mode</code> field is set to <code>low</code>, the integer range is 1-1000 representing 0.1-100 mm/s. acceleration uint32 Fixed point integer from 1-245, representing 0.1-24.5 m/s^2. axis uint32 Move carrier to the center of the axis. location float Move carrier to relative location to the zero-point of the line, which is set by default at the center of the line's first axis after calibration, but can also be set with the <code>SetZero</code> command. distance float Move carrier to relative distance to current carrier position. Negative distance moves the carrier backwards. control mmc.Control Control method for moving carrier. disable_cas bool Disable the carrier's collision avoidance system (CAS). velocity_mode Request.VelocityMode Specify the unit of the <code>velocity</code> value. <p></p>"},{"location":"protocol-documentation.html#requestpause","title":"Request.Pause","text":"<p>Pause any operation in PMF LMS. Any queued commands in the server will be continued once the resume command is given.</p> <p>Expected response: <code>mmc.Response.body.command.body.id</code> (uint32).</p> Field Type Label Description lines uint32 repeated Line ID. If provided, pause operations only on the specified lines. <p></p>"},{"location":"protocol-documentation.html#requestpull","title":"Request.Pull","text":"<p>Pull and initialize a new carrier into a line.</p> <p>Expected response: <code>mmc.Response.body.command.body.id</code> (uint32).</p> Field Type Label Description line uint32 Line ID. axis uint32 Axis ID. carrier uint32 ID for the incoming carrier. direction Request.Direction The direction from which the incoming carrier is moving. velocity uint32 Fixed point integer. If <code>velocity_mode</code> field is set to <code>normal</code>, the integer range is 1-100 representing 0.1-10 m/s. If <code>velocity_mode</code> field is set to <code>low</code>, the integer range is 1-1000 representing 0.1-100 mm/s. acceleration uint32 Fixed point integer from 1-245, representing 0.1-24.5 m/s^2. transition Request.Pull.Transition optional Smoothly transition to carrier movement after pull completion. velocity_mode Request.VelocityMode Specify the unit of the <code>velocity</code> value. <p></p>"},{"location":"protocol-documentation.html#requestpulltransition","title":"Request.Pull.Transition","text":"Field Type Label Description control mmc.Control Control method for moving carrier. disable_cas bool Disabling the carrier's collision avoidance system (CAS). axis uint32 Move carrier to the center of the axis. location float Move carrier to relative location to the zero-point of the line, which is set by default at the center of the line's first axis after calibration, but can also be set with the <code>SetZero</code> command. distance float Move carrier to relative distance to current carrier position. Negative distance moves the carrier backwards."},{"location":"protocol-documentation.html#requestpush","title":"Request.Push","text":"<p>Push an initialized carrier to the specified direction.</p> <p>Expected response: <code>mmc.Response.body.command.body.id</code> (uint32).</p> Field Type Label Description line uint32 Line ID. axis uint32 Axis ID. direction Request.Direction Direction of carrier movement. velocity uint32 If <code>velocity_mode</code> field is set to <code>normal</code>, the integer range is 1-100 representing 0.1-10 m/s. If <code>velocity_mode</code> field is set to <code>low</code>, the integer range is 1-1000 representing 0.1-100 mm/s. acceleration uint32 Fixed point integer from 1-245, representing 0.1-24.5 m/s^2. carrier uint32 optional Carrier ID. If provided, wait for the specified carrier at the axis and push it once the carrier arrives. velocity_mode Request.VelocityMode Specify the unit of the <code>velocity</code> value. <p></p>"},{"location":"protocol-documentation.html#requestrelease","title":"Request.Release","text":"<p>Release the control imposed by the motor to the carrier. If a target is specified, the motor which is located on the target release the control. Otherwise, all carriers on the provided line will be released from control. Expected response: <code>mmc.Response.body.command.body.id</code> (uint32).</p> Field Type Label Description line uint32 Line ID. carrier uint32 Carrier ID. axes Range Axis ID range. drivers Range Driver ID range. <p></p>"},{"location":"protocol-documentation.html#requestremovecommand","title":"Request.RemoveCommand","text":"<p>Remove a command on the server if the command ID is specified. If no command ID is specified, remove any commands received by the server. If the commands are still progressing, cancel the command execution.</p> <p>Expected response: <code>mmc.Response.body.command.body.removed_id</code> (uint32).</p> Field Type Label Description command uint32 optional Command ID. <p></p>"},{"location":"protocol-documentation.html#requestresume","title":"Request.Resume","text":"<p>Resume lines that have been stopped or paused. If the line is not paused or emergency stopped, this command will succeed without any effect.</p> <p>Expected response: <code>mmc.Response.body.command.body.id</code> (uint32).</p> Field Type Label Description lines uint32 repeated Line ID. If provided, resume operations only to those specified lines. <p></p>"},{"location":"protocol-documentation.html#requestsetcarrierid","title":"Request.SetCarrierId","text":"<p>Change the carrier ID of an existing initialized carrier. If the new carrier ID already exists on the line, returns INVALID_CARRIER.</p> <p>Expected response: <code>mmc.Response.body.command.body.id</code> (uint32).</p> Field Type Label Description line uint32 Line ID. carrier uint32 Target existing initialized carrier ID. new_carrier uint32 New desired carrier ID (unique in line). <p></p>"},{"location":"protocol-documentation.html#requestsetzero","title":"Request.SetZero","text":"<p>Set a zero position of a line by positioning an initialized carrier on the first axis of the line.</p> <p>Expected response: <code>mmc.Response.body.command.body.id</code> (uint32).</p> Field Type Label Description line uint32 Line ID. <p></p>"},{"location":"protocol-documentation.html#requeststop","title":"Request.Stop","text":"<p>Send an emergency stop command to stop any operation in PMF LMS. This command also removes all queued commands in the server.</p> <p>Expected response: <code>mmc.Response.body.command.body.id</code> (uint32).</p> Field Type Label Description lines uint32 repeated Line ID. If provided, stop operations only on the specified lines and remove all commands that targeting those lines. <p></p>"},{"location":"protocol-documentation.html#requeststoppull","title":"Request.StopPull","text":"<p>Stop pulling a carrier to the specified axis. If no axis is provided, then all pending carrier pulls on the line will be stopped.</p> <p>Expected response: <code>mmc.Response.body.command.body.id</code> (uint32).</p> Field Type Label Description line uint32 Line ID. axes Range optional Axis ID range. <p></p>"},{"location":"protocol-documentation.html#requeststoppush","title":"Request.StopPush","text":"<p>Stop pushing a carrier from the specified axis. If no axis is provided, then all pending carrier pushes on the line will be stopped.</p> <p>Expected response: <code>mmc.Response.body.command.body.id</code> (uint32).</p> Field Type Label Description line uint32 Line ID. axes Range optional Axis ID range. <p></p>"},{"location":"protocol-documentation.html#response_1","title":"Response","text":"<p>Response description to the command API.</p> Field Type Label Description id uint32 Assigned ID for newly sent command. removed_id uint32 ID of cleared existing command. request_error Request.Error Error during command's execution. <p></p>"},{"location":"protocol-documentation.html#requestdirection","title":"Request.Direction","text":"Name Number Description DIRECTION_UNSPECIFIED 0 DIRECTION_BACKWARD 1 DIRECTION_FORWARD 2"},{"location":"protocol-documentation.html#requesterror_1","title":"Request.Error","text":"Name Number Description COMMAND_REQUEST_ERROR_UNSPECIFIED 0 COMMAND_REQUEST_ERROR_INVALID_LINE 1 Attempted to use line ID outside of the configured lines. COMMAND_REQUEST_ERROR_INVALID_AXIS 2 Attempted to use axis ID outside of the configured axes of the line. COMMAND_REQUEST_ERROR_INVALID_DRIVER 3 Attempted to use driver ID outside of the configured drivers of the line. COMMAND_REQUEST_ERROR_INVALID_ACCELERATION 4 Attempted to use acceleration value outside of 1-245. COMMAND_REQUEST_ERROR_INVALID_VELOCITY 5 Attempted to use velocity value outside of 1-60. COMMAND_REQUEST_ERROR_INVALID_DIRECTION 6 Using invalid direction for the command. COMMAND_REQUEST_ERROR_INVALID_LOCATION 7 Deprecated. Check <code>COMMAND_ERROR_INVALID_CARRIER_TARGET</code> on <code>Info.Response.Command.Error</code>. COMMAND_REQUEST_ERROR_INVALID_DISTANCE 8 Deprecated. Check <code>COMMAND_ERROR_INVALID_CARRIER_TARGET</code> on <code>Info.Response.Command.Error</code>. COMMAND_REQUEST_ERROR_INVALID_CARRIER 9 Attempted to send a command to carrier outside of 1-2048. COMMAND_REQUEST_ERROR_MISSING_PARAMETER 10 A command missing the required parameter. COMMAND_REQUEST_ERROR_COMMAND_NOT_FOUND 11 Attempted to remove or cancel a non-existing command. COMMAND_REQUEST_ERROR_CARRIER_NOT_FOUND 12 Attempted to send command to uninitialized carrier. COMMAND_REQUEST_ERROR_CC_LINK_DISCONNECTED 13 Deprecated. Check <code>COMMAND_ERROR_DRIVER_DISCONNECTED</code> on <code>Info.Response.Command.Error</code>. COMMAND_REQUEST_ERROR_OUT_OF_MEMORY 14 Server unable to receive new command caused by out of memory. Try <code>Command.Request.remove_command</code> to free the memory. COMMAND_REQUEST_ERROR_MAXIMUM_AUTO_INITIALIZE_EXCEEDED 15 Attempted to run more than 8 auto initialize instance. COMMAND_REQUEST_ERROR_CONFLICTING_CARRIER_ID 16 Attempted to assign a new carrier with an ID that is already used by other carrier on the same line"},{"location":"protocol-documentation.html#requestvelocitymode","title":"Request.VelocityMode","text":"Name Number Description VELOCITY_MODE_NORMAL 0 Representing 0.1-10 m/s. VELOCITY_MODE_LOW 1 Representing 0.1-100 mm/s."},{"location":"protocol-documentation.html#mmccontrolproto","title":"mmc/control.proto","text":""},{"location":"protocol-documentation.html#control","title":"Control","text":"<p>Carrier motor control kind.</p> Name Number Description CONTROL_UNSPECIFIED 0 CONTROL_POSITION 1 Carrier controlled with position priority. CONTROL_VELOCITY 2 Carrier controlled with velocity priority. <p></p>"},{"location":"protocol-documentation.html#mmccoreproto","title":"mmc/core.proto","text":""},{"location":"protocol-documentation.html#request_2","title":"Request","text":"Field Type Label Description kind Request.Kind"},{"location":"protocol-documentation.html#response_2","title":"Response","text":"<p>Response description to the core API.</p> Field Type Label Description server Response.Server Server process information. api_version Response.SemanticVersion Server's API version. track_config Response.TrackConfig Track configuration. request_error Request.Error Error response if the core request could not be handled. <p></p>"},{"location":"protocol-documentation.html#responsesemanticversion","title":"Response.SemanticVersion","text":"Field Type Label Description major uint32 minor uint32 patch uint32"},{"location":"protocol-documentation.html#responseserver","title":"Response.Server","text":"<p>Server version and name.</p> Field Type Label Description name string Server name. version Response.SemanticVersion Server implementation version. <p></p>"},{"location":"protocol-documentation.html#responsetrackconfig","title":"Response.TrackConfig","text":"Field Type Label Description lines Response.TrackConfig.Line repeated All configured lines in track."},{"location":"protocol-documentation.html#responsetrackconfigline","title":"Response.TrackConfig.Line","text":"Field Type Label Description id uint32 Line ID. Numeric ID, starting from 1, that is unique to each line in the track. This ID is used to address the line in other requests. name string Configured line name. This name is otherwise unused by the API, and is provided to the client for end-user convenience. axes uint32 Total number of axes in the line. axis_length float Length of each axis in the line, in meters. carrier_length float Carrier magnet length, in meters. drivers uint32 Total number of drivers in the line."},{"location":"protocol-documentation.html#requesterror_2","title":"Request.Error","text":"Name Number Description CORE_REQUEST_ERROR_UNSPECIFIED 0 This error code is unused, and will never be returned. It is reserved as the default error code according to protobuf specification. CORE_REQUEST_ERROR_REQUEST_UNKNOWN 1 The core request kind was unspecified."},{"location":"protocol-documentation.html#requestkind","title":"Request.Kind","text":"Name Number Description CORE_REQUEST_KIND_UNSPECIFIED 0 This request kind is unused, and should never be sent. It is reserved as the default request kind according to protobuf specification. CORE_REQUEST_KIND_API_VERSION 1 Request server's API version. Use to check if API version matches client API compatibility. CORE_REQUEST_KIND_SERVER_INFO 2 Request server process information. This includes the configured server name and server implementation version. CORE_REQUEST_KIND_TRACK_CONFIG 3 Request the configured track information of the server."},{"location":"protocol-documentation.html#mmcinfoproto","title":"mmc/info.proto","text":""},{"location":"protocol-documentation.html#request_3","title":"Request","text":"Field Type Label Description command Request.Command Command information request. Get current status of command; necessary to determine if command is currently running, completed, or failed. track Request.Track Track information request. Get current track state information."},{"location":"protocol-documentation.html#requestcommand","title":"Request.Command","text":"<p>Request for status of specified command ID from the server. If no command ID is provided, then request for status of all commands from the server.</p> <p>Expected response: <code>mmc.Response.body.info.body.commands</code></p> Field Type Label Description id uint32 optional <p></p>"},{"location":"protocol-documentation.html#requesttrack","title":"Request.Track","text":"<p>Request track state information from server. One or more of the <code>info_</code> flags must be enabled to select the kind of track information desired. A filter may be optionally provided to limit the source of information from the track.</p> <p>Expected response: <code>mmc.Response.body.info.body.track</code></p> Field Type Label Description line uint32 Line ID. Select line from which information will be retrieved. info_driver_state bool Retrieve driver state information. info_driver_errors bool Retrieve driver error information. info_axis_state bool Retrieve axis state information. info_axis_errors bool Retrieve axis errors information. info_carrier_state bool Retrieve carrier state information. drivers Range Retrieve information from driver ID range. Driver information flags will include drivers within this range. Axis information flags will include every axis belonging to the drivers in this range. Carrier information flags will include every carrier currently controlled by one of the drivers in this range. axes Range Retrieve information from axis ID range. Driver information flags will include drivers that contain one of the axes within this range. Axis information flags will include axes within this range. Carrier information flags will include every carrier currently controlled by one of the axes in this range. carriers Request.Track.Ids Retrieve information from carrier IDs. Driver information flags will include drivers that control one of the carriers within this list. Axis information flags will include axes that control one of the carriers within this list. Carrier information flags will include carriers within this list. <p></p>"},{"location":"protocol-documentation.html#requesttrackids","title":"Request.Track.Ids","text":"<p>List of IDs. At least one ID must be provided.</p> Field Type Label Description ids uint32 repeated <p></p>"},{"location":"protocol-documentation.html#response_3","title":"Response","text":"Field Type Label Description command Response.Commands Information for requested command(s). If empty, no matching command(s) was found. track Response.Track Information for requested track state. request_error Request.Error Info request error. This error field will be returned if the provided info request could not be handled properly."},{"location":"protocol-documentation.html#responsecommand","title":"Response.Command","text":"Field Type Label Description id uint32 Command ID. Valid IDs begin from 1, and may be reused after command status is cleared from server history. status Response.Command.Status Command status. error Response.Command.Error optional Command error response, only if the status is <code>COMMAND_STATUS_FAILED</code>."},{"location":"protocol-documentation.html#responsecommands","title":"Response.Commands","text":"Field Type Label Description items Response.Command repeated"},{"location":"protocol-documentation.html#responsetrack","title":"Response.Track","text":"Field Type Label Description line uint32 Line ID. driver_state Response.Track.Driver.State repeated Driver state information list. Empty if request flag was disabled. driver_errors Response.Track.Driver.Error repeated Driver error information list. Empty if request flag was disabled. axis_state Response.Track.Axis.State repeated Axis state information list. Empty if request flag was disabled. axis_errors Response.Track.Axis.Error repeated Axis error information list. Empty if request flag was disabled. carrier_state Response.Track.Carrier.State repeated Carrier state information list. Empty if request flag was disabled."},{"location":"protocol-documentation.html#responsetrackaxis","title":"Response.Track.Axis","text":""},{"location":"protocol-documentation.html#responsetrackaxiserror","title":"Response.Track.Axis.Error","text":"Field Type Label Description id uint32 Axis ID. overcurrent bool Motor overcurrent detected. Motor control released to prevent damage."},{"location":"protocol-documentation.html#responsetrackaxisstate","title":"Response.Track.Axis.State","text":"Field Type Label Description id uint32 Axis ID. motor_active bool Axis is currently controlling a carrier. waiting_pull bool Axis is waiting to pull carrier. waiting_push bool Axis is waiting to push carrier. carrier uint32 Carrier ID; non-zero if an initialized carrier is on the axis. hall_alarm_back bool Axis back hall alarm is active. Magnet is detected above back hall sensor. hall_alarm_front bool Axis front hall alarm is active. Magnet is detected above front hall sensor."},{"location":"protocol-documentation.html#responsetrackcarrier","title":"Response.Track.Carrier","text":""},{"location":"protocol-documentation.html#responsetrackcarrierstate","title":"Response.Track.Carrier.State","text":"Field Type Label Description id uint32 Carrier ID. Will always be non-zero. position float Position of the carrier in line, in meters. axis_main uint32 Carrier's primary axis ID. axis_auxiliary uint32 optional Carrier's auxiliary axis ID, if carrier is on top of two axes. cas_disabled bool Collision avoidance system (CAS) disabled. cas_triggered bool Collision avoidance system (CAS) triggered. Carrier will automatically resume movement when path is clear. state Response.Track.Carrier.State.State Carrier state."},{"location":"protocol-documentation.html#responsetrackdriver","title":"Response.Track.Driver","text":""},{"location":"protocol-documentation.html#responsetrackdrivererror","title":"Response.Track.Driver.Error","text":"Field Type Label Description id uint32 Driver ID. control_loop_time_exceeded bool Control loop exceeded maximum loop time. inverter_overheat bool Inverter is overheated. undervoltage bool Driver voltage supply too low. overvoltage bool Driver voltage supply too high. comm_error_prev bool Communication error with previous driver in line. comm_error_next bool Communication error with next driver in line."},{"location":"protocol-documentation.html#responsetrackdriverstate","title":"Response.Track.Driver.State","text":"Field Type Label Description id uint32 Driver ID. connected bool Connection status between driver and server. busy bool Driver is currently executing a command. motor_disabled bool Driver motor release activated. All driver motors are inactive. stopped bool Driver emergency stop activated. paused bool Driver pause activated."},{"location":"protocol-documentation.html#requesterror_3","title":"Request.Error","text":"Name Number Description INFO_REQUEST_ERROR_UNSPECIFIED 0 This error code is unused, and will never be returned. It is reserved as the default error code according to protobuf specification. INFO_REQUEST_ERROR_INVALID_LINE 1 Invalid line ID provided. Ensure that line ID exists in track configuration. INFO_REQUEST_ERROR_INVALID_AXIS 2 Invalid axis ID provided. Ensure that axis ID exists in line. INFO_REQUEST_ERROR_INVALID_DRIVER 3 Invalid driver ID provided. Ensure that driver ID exists in line. INFO_REQUEST_ERROR_MISSING_PARAMETER 4 Request is missing a required parameter. Ensure that at least one of the information flag is selected when requesting track information."},{"location":"protocol-documentation.html#responsecommanderror","title":"Response.Command.Error","text":"Name Number Description COMMAND_ERROR_UNSPECIFIED 0 This error code is unused, and will never be returned. It is reserved as the default error code according to protobuf specification. COMMAND_ERROR_INVALID_SYSTEM_STATE 1 System state prevented successful command execution. Ensure that all preconditions are met with track info request before sending command. COMMAND_ERROR_INVALID_CARRIER_ID 2 Deprecated. Check <code>COMMAND_REQUEST_ERROR_INVALID_CARRIER</code> on <code>Command.Request.Error</code>. COMMAND_ERROR_DRIVER_DISCONNECTED 3 Driver connection failed while command progressing. COMMAND_ERROR_UNEXPECTED 4 Unexpected command execution error. This is likely an implementation bug; please contact PMF support for assistance. COMMAND_ERROR_CARRIER_NOT_FOUND 5 Target carrier is removed while command progressing. COMMAND_ERROR_CARRIER_ALREADY_INITIALIZED 6 Attempted to initialize an initialized carrier. COMMAND_ERROR_DRIVER_STOPPED 7 Target driver is stopped while command progressing. Consider resume the driver before sending further command. COMMAND_ERROR_INVALID_CARRIER_TARGET 8 Carrier targetting a location outside of the configured track. COMMAND_ERROR_CONFLICTING_CARRIER_ID 9 Attempted to assign a new carrier with an ID that is already used by other carrier on the same line"},{"location":"protocol-documentation.html#responsecommandstatus","title":"Response.Command.Status","text":"Name Number Description COMMAND_STATUS_UNSPECIFIED 0 This command status is unused, and will never be returned. It is reserved as the default status code according to protobuf specification. COMMAND_STATUS_PROGRESSING 1 Command currently executing. COMMAND_STATUS_COMPLETED 2 Command completed. COMMAND_STATUS_FAILED 3 Command execution failed."},{"location":"protocol-documentation.html#responsetrackcarrierstatestate","title":"Response.Track.Carrier.State.State","text":"Name Number Description CARRIER_STATE_NONE 0 CARRIER_STATE_CALIBRATING 1 Carrier is currently operating for line calibration. CARRIER_STATE_CALIBRATE_COMPLETED 2 Carrier has completed line calibration, and may now be used for normal operation. CARRIER_STATE_MOVING 3 Carrier is currently moving towards target destination. CARRIER_STATE_MOVE_COMPLETED 4 Carrier has arrived within threshold at target destination. CARRIER_STATE_INITIALIZING 5 Carrier is initializing. Must not be used until initialization is completed. CARRIER_STATE_INITIALIZE_COMPLETED 6 Carrier initialization completed. May now be used for normal operation. CARRIER_STATE_PUSHING 7 Carrier is being pushed by axis. Used to eject carrier from line. CARRIER_STATE_PUSH_COMPLETED 8 Carrier push completed by axis. This state is not observed when carrier is ejected from line. CARRIER_STATE_PULLING 9 Carrier is being pulled by axis. Must not be used until pull is completed. CARRIER_STATE_PULL_COMPLETED 10 Carrier pull completed by axis. May now be used for normal operation. CARRIER_STATE_OVERCURRENT 11 Overcurrent detected in carrier axis motor. Carrier movement has been canceled."},{"location":"protocol-documentation.html#scalar-value-types","title":"Scalar Value Types","text":".proto Type Notes C++ Java Python Go C# PHP Ruby  double double double float float64 double float Float  float float float float float32 float float Float  int32 Uses variable-length encoding. Inefficient for encoding negative numbers \u2013 if your field is likely to have negative values, use sint32 instead. int32 int int int32 int integer Bignum or Fixnum (as required)  int64 Uses variable-length encoding. Inefficient for encoding negative numbers \u2013 if your field is likely to have negative values, use sint64 instead. int64 long int/long int64 long integer/string Bignum  uint32 Uses variable-length encoding. uint32 int int/long uint32 uint integer Bignum or Fixnum (as required)  uint64 Uses variable-length encoding. uint64 long int/long uint64 ulong integer/string Bignum or Fixnum (as required)  sint32 Uses variable-length encoding. Signed int value. These more efficiently encode negative numbers than regular int32s. int32 int int int32 int integer Bignum or Fixnum (as required)  sint64 Uses variable-length encoding. Signed int value. These more efficiently encode negative numbers than regular int64s. int64 long int/long int64 long integer/string Bignum  fixed32 Always four bytes. More efficient than uint32 if values are often greater than 2^28. uint32 int int uint32 uint integer Bignum or Fixnum (as required)  fixed64 Always eight bytes. More efficient than uint64 if values are often greater than 2^56. uint64 long int/long uint64 ulong integer/string Bignum  sfixed32 Always four bytes. int32 int int int32 int integer Bignum or Fixnum (as required)  sfixed64 Always eight bytes. int64 long int/long int64 long integer/string Bignum  bool bool boolean boolean bool bool boolean TrueClass/FalseClass  string A string must always contain UTF-8 encoded or 7-bit ASCII text. string String str/unicode string string string String (UTF-8)  bytes May contain any arbitrary sequence of bytes. string ByteString str []byte ByteString string String (ASCII-8BIT)"}]}